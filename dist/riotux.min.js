"use strict";function _asyncToGenerator(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){function n(o,s){try{var i=e[o](s),u=i.value}catch(c){return void r(c)}return i.done?void t(u):Promise.resolve(u).then(function(t){return n("next",t)},function(t){return n("throw",t)})}return n("next")})}}Object.defineProperty(exports,"__esModule",{value:!0});var riotux={_store:{state:{},actions:{},components:[]},store:{subscribe:function(t,e){riotux._store.components.push({component:t,handler:e})},unsubscribe:function(t){riotux._store.components.forEach(el,function(e){el===t&&riotux._store.components.splice(e,1)})},dispatch:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;e>n;n++)r[n-1]=arguments[n];var o=void 0,s=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function n(){var e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.resolve(riotux._store.actions[t].apply(null,[].concat(riotux._store.state,r))).then(function(e){var r=riotux._store.components;o={action:t,stateValue:e},Promise.resolve(r.forEach(function(t,e){void 0!==t.component&&"function"==typeof t.handler&&t.handler(o)}))}).then(function(){return o});case 2:return e=n.sent,n.abrupt("return",e);case 4:case"end":return n.stop()}},n,void 0)}));return function(){return e.apply(this,arguments)}}();return s()},setState:function(t){Object.assign(riotux._store.state,t)},get:function(t){return riotux._store.state[t]},setActions:function(t){Object.assign(riotux._store.actions,t)}}},store=Object.assign({},{dispatch:riotux.store.dispatch,subscribe:riotux.store.subscribe,unsubscribe:riotux.store.unsubscribe}),dispatch=riotux.store.dispatch,getState=riotux.store.get,setState=riotux.store.setState,setActions=riotux.store.setActions;exports.store=store,exports.dispatch=dispatch,exports.getState=getState,exports.setState=setState,exports.setActions=setActions;