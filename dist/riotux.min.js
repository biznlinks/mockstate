!function(t,n){"function"==typeof define&&define.amd?define([],n):"undefined"!=typeof module?module.exports=n:t.riotux=n()}(this,function(){"use strict";function t(){this.store={dispatch:function(t){var n=Array.prototype.slice.call(arguments,1),s=[e.state],i=s.concat(n);return Promise.resolve(e.mutations[t].apply(null,i)).then(function(){e.update()})}},this.actions={}}var n,e={tags:[],subscribe:function(t,n,s){e.tags.push({component:t,states:n,handler:s})},unsubscribe:function(t){e.tags.forEach(function(n,s){n.component===t&&e.tags.splice(s,1)})},update:function(){e.tags.forEach(function(t,s,i){-1!==t.states.indexOf(n)&&"function"==typeof t.handler&&t.handler(n,e.state[n])})}};return t.prototype={listen:function(t){e.addListener(t)},subscribe:function(t,n,s){e.subscribe(t,n,s)},unsubscribe:function(t){e.unsubscribe(t)},Store:function(t){return e=Object.assign(e,t),this.store},Actions:function(t){return this.actions=t,this.actions},action:function(){if(n=arguments[0],void 0!==e.state[n]){var t=Array.prototype.slice.call(arguments,2);this.actions[arguments[1]].apply(null,t)}else{var t=Array.prototype.slice.call(arguments,1);this.actions[arguments[0]].apply(null,t)}},getter:function(t){return e.state[t]}},new t});