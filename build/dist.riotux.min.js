"use strict";function _asyncToGenerator(t){return function(){var r=t.apply(this,arguments);return new Promise(function(t,e){function n(o,s){try{var u=r[o](s),i=u.value}catch(a){return void e(a)}return u.done?void t(i):Promise.resolve(i).then(function(t){return n("next",t)},function(t){return n("throw",t)})}return n("next")})}}Object.defineProperty(exports,"__esModule",{value:!0});var riotux={_store:{state:{},mutators:{},components:[]},store:{subscribe:function(t,r){riotux._store.components.push({component:t,handler:r})},unsubscribe:function(t){riotux._store.components.forEach(el,function(r){el===t&&Array.prototype.splice(void 0,r)})},dispatch:function(t){for(var r=arguments.length,e=Array(r>1?r-1:0),n=1;r>n;n++)e[n-1]=arguments[n];var o=void 0,s=function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.resolve(riotux._store.mutators[t].apply(null,[].concat(riotux._store.state,e))).then(function(r){var e=riotux._store.components[0];return o={action:t,stateValue:r},void 0!==e&&"function"===e.handler?e.handler(o):o}).then(function(){return o});case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}},n,void 0)}));return function(){return r.apply(this,arguments)}}();return s()},setState:function(t){Object.assign(riotux._store.state,t)},get:function(t){return riotux._store.state[t]},setMutators:function(t){Object.assign(riotux._store.mutators,t)}}},store=riotux.store,dispatch=riotux.store.dispatch;exports.store=store,exports.dispatch=dispatch;